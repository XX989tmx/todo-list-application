<!DOCTYPE html>
<html lang="en">
  <head>
    <title>inbox page</title>

    <%- include('./partials/_head.ejs') %>
    <link href="/stylesheets/inbox.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <%- include('./partials/_header.ejs') %>
    <main class="main">
      <div class="container fluid">
        <div class="row">
          <!-- 以下はパーシャル化
             -->

          <%- include('./partials/_sidebar.ejs') %>
          <div class="main-area col-xs-12 col-sm-12 col-md-9">
            <!-- main section -->
            <div class="main-area-inner">
              <div class="row">
                <div class="col">
                  <div>
                    <div class="inline-block inbox-mainsection-icon-area">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        class="bi bi-stack"
                        viewBox="0 0 16 16"
                        style="height: 100%; width: 100%"
                      >
                        <path
                          d="M14.12 10.163l1.715.858c.22.11.22.424 0
                                .534L8.267 15.34a.598.598 0 0 1-.534 0L.165
                                11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317
                                2.659c.505.252 1.1.252 1.604
                                0l5.317-2.66zM7.733.063a.598.598 0 0 1 .534
                                0l7.568 3.784a.3.3 0 0 1 0 .535L8.267
                                8.165a.598.598 0 0 1-.534 0L.165 4.382a.299.299
                                0 0 1 0-.535L7.733.063z"
                        />
                        <path
                          d="M14.12 6.576l1.715.858c.22.11.22.424 0
                                  .534l-7.568 3.784a.598.598 0 0 1-.534 0L.165
                                  7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317
                                  2.659c.505.252 1.1.252 1.604 0l5.317-2.659z"
                        />
                      </svg>
                    </div>
                    <div class="inline-block inbox-mainsection-heading-area">
                      <h3
                        id="inbox-mainsection-heading"
                        class="inbox-mainsection-heading"
                      >
                        Inbox
                      </h3>
                    </div>
                  </div>
                </div>
              </div>
              <div id="main-section" class="main-section row">
                <div class="col">
                  <ul
                    class="margin-and-padding-0 list-style-none list-group todo-item-list-ul" id="todo-container"
                  >
                    <% inbox.forEach(todo=> { %> <li id="todo-item-li"
                    class="list-group-item todo-item <%= todo.priority === 1
                    ?"todoColorPriority1" : todo.priority === 2
                    ?"todoColorPriority2" :"todoColorPriority3" %> ">
                    <div class="todo-items row">
                      <div class="col-1 col-sm-1 col-md-1">
                        <input
                          class="todo-checkbox"
                          type="checkbox"
                          name=""
                          id="<%- todo.id %> "
                        />
                      </div>
                      <div class="col-1 col-sm-1 col-md-1" id="todo-priority">
                        <% if (todo.priority === 3) { %>
                        <span class="priority3"><%= todo.priority %> </span>
                        <% } else if (todo.priority === 2) { %>
                        <span class="priority2"><%= todo.priority %> </span>
                        <% } else { %>
                        <span class="priority1"><%= todo.priority %> </span>

                        <% } %>
                      </div>
                      <div
                        class="col-10 col-sm-10 col-md-6"
                        id="todo-item"
                        data-toggle="collapse"
                        data-target="#todo-item-collapse"
                      >
                        <span
                          value="<% todo.title
                                                      %> "
                          ><%= todo.title %>
                        </span>
                      </div>

                      <div class="today-icon col-3 col-sm-3 col-md-1" >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-star setAsTodayIcon"
                          viewBox="0 0 16 16"
                          id="set-as-today-icon"
                        >
                          <path
                            d="M2.866
                                                          14.85c-.078.444.36.791.746.593l4.39-2.256
                                                          4.389
                                                          2.256c.386.198.824-.149.746-.592l-.83-4.73
                                                          3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513
                                                          0 0 0-.927 0L5.354
                                                          5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523
                                                          3.356-.83
                                                          4.73zm4.905-2.767l-3.686
                                                          1.894.694-3.957a.565.565
                                                          0 0 0-.163-.505L1.71
                                                          6.745l4.052-.576a.525.525
                                                          0 0 0
                                                          .393-.288l1.847-3.658
                                                          1.846 3.658a.525.525 0
                                                          0 0
                                                          .393.288l4.052.575-2.906
                                                          2.77a.564.564 0 0
                                                          0-.163.506l.694
                                                          3.957-3.686-1.894a.503.503
                                                          0 0 0-.461 0z"
                          />
                        </svg>
                      </div>
                      <div class="drag-button col-3 col-sm-3 col-md-1" id="drag-button">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-grip-vertical"
                          viewBox="0 0 16 16"
                        >
                          <path
                            d="M7 2a1 1 0 1 1-2
                                                            0 1 1 0 0 1 2 0zm3
                                                            0a1 1 0 1 1-2 0 1 1
                                                            0 0 1 2 0zM7 5a1 1 0
                                                            1 1-2 0 1 1 0 0 1 2
                                                            0zm3 0a1 1 0 1 1-2 0
                                                            1 1 0 0 1 2 0zM7 8a1
                                                            1 0 1 1-2 0 1 1 0 0
                                                            1 2 0zm3 0a1 1 0 1
                                                            1-2 0 1 1 0 0 1 2
                                                            0zm-3 3a1 1 0 1 1-2
                                                            0 1 1 0 0 1 2 0zm3
                                                            0a1 1 0 1 1-2 0 1 1
                                                            0 0 1 2 0zm-3 3a1 1
                                                            0 1 1-2 0 1 1 0 0 1
                                                            2 0zm3 0a1 1 0 1 1-2
                                                            0 1 1 0 0 1 2 0z"
                          />
                        </svg>
                      </div>
                      <div
                        class="col-3 col-sm-3 col-md-1 update-todo-modal-trigger-button"
                        id="<%- todo.id %> "
                        data-toggle="modal"
                        data-target="#update-todo-input-modal"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-pencil-square edit-icon"
                          viewBox="0 0 16 16"
                        >
                          <path
                            d="M15.502
                                                              1.94a.5.5 0 0 1 0
                                                              .706L14.459
                                                              3.69l-2-2L13.502.646a.5.5
                                                              0 0 1 .707 0l1.293
                                                              1.293zm-1.75
                                                              2.456l-2-2L4.939
                                                              9.21a.5.5 0 0
                                                              0-.121.196l-.805
                                                              2.414a.25.25 0 0 0
                                                              .316.316l2.414-.805a.5.5
                                                              0 0 0
                                                              .196-.12l6.813-6.814z"
                          />
                          <path
                            fill-rule="evenodd"
                            d="M1 13.5A1.5
                                                                1.5 0 0 0 2.5
                                                                15h11a1.5 1.5 0
                                                                0 0
                                                                1.5-1.5v-6a.5.5
                                                                0 0 0-1 0v6a.5.5
                                                                0 0
                                                                1-.5.5h-11a.5.5
                                                                0 0
                                                                1-.5-.5v-11a.5.5
                                                                0 0 1
                                                                .5-.5H9a.5.5 0 0
                                                                0 0-1H2.5A1.5
                                                                1.5 0 0 0 1
                                                                2.5v11z"
                          />
                        </svg>
                      </div>
                      <div
                        id="<%- todo.id %>
                                                              "
                        class="col-3 col-sm-3 col-md-1 delete-todo "
                        data-toggle="popover"
                        data-content="delete
                                                              todo"
                        placement="right"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-backspace delete-icon"
                          viewBox="0 0 16
                                                                16"
                        >
                          <path
                            d="M5.83
                                                                  5.146a.5.5 0 0
                                                                  0 0 .708L7.975
                                                                  8l-2.147
                                                                  2.146a.5.5 0 0
                                                                  0
                                                                  .707.708l2.147-2.147
                                                                  2.146
                                                                  2.147a.5.5 0 0
                                                                  0
                                                                  .707-.708L9.39
                                                                  8l2.146-2.146a.5.5
                                                                  0 0
                                                                  0-.707-.708L8.683
                                                                  7.293 6.536
                                                                  5.146a.5.5 0 0
                                                                  0-.707 0z"
                          />
                          <path
                            d="M13.683
                                                                    1a2 2 0 0 1
                                                                    2 2v10a2 2 0
                                                                    0 1-2
                                                                    2h-7.08a2 2
                                                                    0 0
                                                                    1-1.519-.698L.241
                                                                    8.65a1 1 0 0
                                                                    1
                                                                    0-1.302L5.084
                                                                    1.7A2 2 0 0
                                                                    1 6.603
                                                                    1h7.08zm-7.08
                                                                    1a1 1 0 0
                                                                    0-.76.35L1
                                                                    8l4.844
                                                                    5.65a1 1 0 0
                                                                    0
                                                                    .759.35h7.08a1
                                                                    1 0 0 0
                                                                    1-1V3a1 1 0
                                                                    0
                                                                    0-1-1h-7.08z"
                          />
                        </svg>
                      </div>
                      <div
                        id="todo-item-collapse"
                        class="todo-item-collapse collapse row"
                      >
                        <div
                          id="todo-item-collapse-contents"
                          data-toggle="modal"
                          data-target="#update-todo-input-modal"
                        >
                          <p>todo notes & deadline</p>
                          <p><%= todo.notes %></p>
                          <span><%= todo.deadline %> </span>
                        </div>
                      </div>
                    </div>
                          </li>
                    <% }) %>
                  </ul>
                </div>
                <div class="col-12">
                  <div
                    id="add-todo-button"
                    data-toggle="modal"
                    data-target="#todo-input-modal"
                  >
                    <button class="add-todo-button" type="submit">
                      add todo
                    </button>
                  </div>

                  <!--　パーシャル化  -->
                  <!-- input modal. add new todo modal -->
                  <div id="todo-input-modal" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <div class="row">
                            <div class="col-10">Add todo</div>
                            <div class="col-2">
                              <button
                                type="submit"
                                id="close-modal-button"
                                data-dismiss="modal"
                                class="btn btn-outline-dark"
                              >
                                close
                              </button>
                            </div>
                          </div>
                        </div>
                        <div class="modal-body">
                          <form
                            action="createTodo"
                            method="POST"
                            id="add-todo-form"
                            role="form"
                          >
                            <div class="form-group">
                              <label for="todo-input-title">todo name</label>
                              <input
                                class="form-control"
                                id="todo-input-title"
                                type="text"
                                name="title"
                                value=""
                                autofocus
                              />
                            </div>
                            <div class="form-group">
                              <label for="todo-input-notes">notes</label>
                              <!-- <input
                              class="modal-notes-input"
                              id="todo-input-notes"
                              type="textarea"
                              name=""
                              value=""
                            /> -->
                              <textarea
                                class="form-control"
                                rows="7"
                                id="todo-input-notes"
                                placeholder="notes"
                                name="notes"
                              ></textarea>
                              <!-- <textarea
                              rows=""
                              cols=""
                              class="modal-notes-input"
                              id="todo-input-notes"
                            ></textarea> -->
                            </div>
                            <div class="form-group">
                              <label for="priority-option">Priority:</label>
                              <select
                                class="form-control"
                                id="priority-option"
                                name="priority"
                              >
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                              </select>
                            </div>
                            <div class="form-group">
                              <label for="todo-schedule">schedule</label>
                              <input
                                class="modal-input"
                                id="todo-schedule"
                                type="date"
                                name="scheduledDate"
                                aria-label="schedule"
                              />
                            </div>
                            <div class="form-group">
                              <label for="todo-deadline">deadline</label>
                              <input
                                class="modal-input"
                                id="todo-deadline"
                                type="date"
                                name="deadline"
                                id=""
                                aria-label="deadline"
                              />
                            </div>
                            <button
                              id="submit-addNewTodo-todo-inputs"
                              type="submit"
                              class="btn btn-success"
                            >
                              add
                            </button>
                          </form>
                        </div>
                        <div class="modal-footer">
                          <button
                            id="cancel-todo-input"
                            type="submit"
                            data-dismiss="modal"
                            class="btn btn-outline-dark"
                          >
                            cancel
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <a id="linkto-google" href="google.com" title="google"></a>
                </div>

                <!-- update existing item modal -->
                <div
                  id="update-todo-input-modal"
                  class="modal fade"
                  role="dialog"
                >
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <div class="row">
                          <div class="col-10">Update todo</div>
                          <div class="col-2">
                            <button
                              type="submit"
                              id="close-modal-button"
                              data-dismiss="modal"
                              class="btn btn-outline-dark"
                            >
                              close
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="modal-body">
                        <form
                          action="/updateTodo"
                          method="POST"
                          id="update-todo-form"
                          role="form"
                        >
                          <div class="form-group">
                            <input
                              id="todoId"
                              type=""
                              name="target-todo-id"
                              value=""
                              style="display: none"
                            />
                          </div>
                          <div class="form-group">
                            <label for="todo-input-title">todo name</label>
                            <input
                              class="form-control"
                              id="update-todo-input-title"
                              type="text"
                              name="title"
                              value=""
                              placeholder="todo"
                              autofocus
                            />
                          </div>
                          <div class="form-group">
                            <label for="todo-input-notes">notes</label>
                            <textarea
                              class="form-control"
                              rows="7"
                              id="update-todo-input-notes"
                              name="notes"
                              placeholder="notes"
                            ></textarea>
                            <!-- <textarea
                            rows=""
                            cols=""
                            class="modal-notes-input"
                            id="update-todo-input-notes"
                            placeholder="notes"
                          ></textarea> -->
                          </div>
                          <div class="form-group">
                            <label for="update-priority-option"
                              >Priority:</label
                            >
                            <select
                              class="form-control"
                              id="update-priority-option"
                              name="priority"
                            >
                              <option>1</option>
                              <option>2</option>
                              <option>3</option>
                            </select>
                          </div>
                          <div class="form-group">
                            <label for="todo-schedule">schedule</label>
                            <input
                              class="modal-input"
                              id="update-todo-schedule"
                              type="date"
                              name="scheduledDate"
                              id=""
                              aria-label="schedule"
                            />
                          </div>
                          <div class="form-group">
                            <label for="todo-deadline">deadline</label>
                            <input
                              class="modal-input"
                              id="update-todo-deadline"
                              type="date"
                              name="deadline"
                              id=""
                              aria-label="deadline"
                            />
                          </div>
                          <button
                            id="update-todo-inputs"
                            type="submit"
                            class="btn btn-success"
                          >
                            Update
                          </button>
                        </form>
                      </div>
                      <div class="modal-footer">
                        <button
                          id="cancel-todo-input"
                          type="submit"
                          data-dismiss="modal"
                          class="btn btn-outline-dark"
                        >
                          cancel
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="backdrop" id="backdrop"></div>
      </div>
    </main>
    <%- include('./partials/_footer.ejs') %>
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"
      integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"
      integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
      crossorigin="anonymous"
    ></script>
    <script>
      class Sidebar {}
    </script>
    <script src="/javascript/updateTodoBtnTriggerAction.js"></script>
    <script src="/javascript/today-icon.js"></script>
    <script>
      // const todoItemListUl = document.getElementById("todo-item-list-ul");
      // const traverseTodoItemRecursive = (todoItemListUl) => {
      //   let idx = 0;
      //   idx += 1;
      //   const firstTodo = todoItemListUl.firstChild;
      //   return traverseTodoItemRecursive(todoItemListUl.childNodes[idx]);
      // };
      // traverseTodoItemRecursive(todoItemListUl);
    </script>
    <script src="/javascript/listStyleChange.js">
      
    </script>
    <script src="/javascript/saveListItemToStorage.js">
     
    </script>
    <script src="/javascript/moveTodoToTrashBoxAction.js">
      
    </script>
    <script src="/javascript/completeTodoAction.js">
     
    </script>
    <script
      type="text/javascript"
      src="/javascript/sidebarColorChange.js"
    ></script>
    <script src="/javascript/popover.js"></script>
    <script src="/javascript/inboxEjsClass.js"></script>
    <script>
     

      //ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー-

      // modal
      // $(document).ready(function () {
      //   $("#todo-item-collapse-contents").modal();
      // });

      //

      //ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー-
      let addTodoBtn = document.getElementById("add-todo-button");
      addTodoBtn.addEventListener("click", () => {
        console.log("clicked");
      });

      let checkbox1 = document.getElementById("checkbox1");
      checkbox1.addEventListener("change", () => {
        console.log("checked");
      });

      let inboxMainsectionHeading = document.getElementById(
        "inbox-mainsection-heading"
      );
      inboxMainsectionHeading.addEventListener("mouseover", () => {
        console.log("mouse-over");
      });

      let todoItem1 = document.getElementById("todo-item");
      todoItem1.addEventListener("click", () => {
        console.log("clicked1");
      });

      $(document).ready(function () {
        $("#add-todo-button").on({
          click: function () {
            //   $('#inbox-mainsection-heading').removeClass('inbox-mainsection-heading').addClass('red')
            // $("#todo-input").toggle("fast");
            // $("#todo-input-title").focus().val("test");
            // console.log($("#todo-input-title").val());
            // console.log($("#inbox-sidebar-heading").html());
            // console.log($("#linkto-google").attr("href"));
            // $("#linkto-google").attr({
            //   href: "youtube.com",
            //   title: "youtube",
            // });
            // console.log($("#linkto-google").attr("href"));
            // let input2 =
            //   '<input id="todo-input-title2" type="" name="" value="" />';
            // $("#todo-input").append(input2);
          },
        });
      });

      

      
    </script>
    <script src="/javascript/_ajax.js"></script>
    <script>
      // $(document).ready(function () {
      //   // SUBMIT FORM
      //   $("#add-todo-form").submit(function (event) {
      //     // Prevent the form from submitting via the browser.
      //     event.preventDefault();
      //     ajaxPost();
      //   });

      //   function ajaxPost() {
      //     // PREPARE FORM DATA
      //     const formData = {
      //       title: $("#todo-input-title").val(),
      //       notes: $("#todo-input-notes").val(),
      //       priority: $("#priority-option").val(),
      //       scheduledDate: $("#todo-schedule").val(),
      //       deadline: $("#todo-deadline").val(),
      //     };

      //     // DO POST
      //     $.ajax({
      //       type: "POST",
      //       contentType: "application/json",
      //       url: window.location + "/createTodo",
      //      data: JSON.stringify(formData),
      //       dataType: "json",
      //       success: function (addedTodo) {

      //         // $("#postResultDiv").html(
      //         //   "<p>" +
      //         //     "Post Successfully! <br>" +
      //         //     "--->" +
      //         //     JSON.stringify(customer) +
      //         //     "</p>"
      //         // );
      //       },
      //       error: function (e) {
      //         alert("Error!");
      //         console.log("ERROR: ", e);
      //       },
      //     });

      //     // Reset FormData after Posting
      //     resetData();
      //   }

      //   function resetData() {
      //     $("#firstname").val("");
      //     $("#lastname").val("");
      //   }
      // });
    </script>
  </body>
</html>
